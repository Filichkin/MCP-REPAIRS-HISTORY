# MCP for Vehicle Warranty & Maintenance

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≥–∞—Ä–∞–Ω—Ç–∏–π–Ω—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π –∏ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–µ–º–æ–Ω—Ç–æ–≤ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Model Context Protocol (MCP) –∏ –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –Ω–∞ –±–∞–∑–µ LangGraph.

**üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:** [QUICKSTART.md](QUICKSTART.md) | **üìö Production Deployment:** [DEPLOYMENT.md](DEPLOYMENT.md) | **üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è:** [MIGRATION.md](MIGRATION.md)

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### üîß MCP –°–µ—Ä–≤–µ—Ä
MCP —Å–µ—Ä–≤–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ–± –∏—Å—Ç–æ—Ä–∏–∏ —Ä–µ–º–æ–Ω—Ç–æ–≤, –≥–∞—Ä–∞–Ω—Ç–∏–π–Ω—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π.

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [backend/mcp_server/README.md](backend/mcp_server/README.md)

### ü§ñ –°–∏—Å—Ç–µ–º–∞ –∞–≥–µ–Ω—Ç–æ–≤
–ú—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≥–∞—Ä–∞–Ω—Ç–∏–π–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º LangGraph –∏ GigaChat LLM.

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [backend/agent/README.md](backend/agent/README.md)

### üñ•Ô∏è Frontend (Gradio)
–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ –±–∞–∑–µ Gradio –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –∞–≥–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–π —á–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ß–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–¥–∞–≤–∞–Ω–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤
- –ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ VIN –∞–≤—Ç–æ–º–æ–±–∏–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∞–≤—Ç–æ–º–æ–±–∏–ª—é

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

#### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
uv sync
```

#### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª —Å –ø—Ä–∏–º–µ—Ä–æ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```bash
cp infra/.env.example infra/.env
```

**–í–∞–∂–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è GigaChat:**
- `GIGACHAT_USE_API=true` - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Evolution Platform API (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- `GIGACHAT_API_KEY_EVOLUTION` - API –∫–ª—é—á Evolution Platform
- `EVOLUTION_PROJECT_ID` - ID –ø—Ä–æ–µ–∫—Ç–∞ –≤ Evolution Platform
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `GIGACHAT_USE_API=false` —Å `GIGACHAT_API_KEY` –¥–ª—è langchain_gigachat

#### 3. –ó–∞–ø—É—Å–∫ MCP —Å–µ—Ä–≤–µ—Ä–∞

```bash
cd backend
python -m mcp_server.server
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://0.0.0.0:8004`

#### 4. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –∞–≥–µ–Ω—Ç–æ–≤

```bash
python -m backend.agent.main server
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:8005`

#### 5. –ó–∞–ø—É—Å–∫ Frontend (Gradio)

```bash
cd frontend
./run.sh
```

–ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:

```bash
cd frontend
source ../backend/.venv/bin/activate
python app.py
```

Frontend –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://0.0.0.0:7860`

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –∞–≥–µ–Ω—Ç–æ–≤ –∑–∞–ø—É—â–µ–Ω–∞ –Ω–∞ `http://localhost:8005` –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º frontend.

### Production Deployment

–î–ª—è production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å HTTPS, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∏ nginx reverse proxy:

#### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å Docker Compose

```bash
# 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ (–¥–ª—è development)
cd infra/scripts
./generate-certs.sh

# 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp infra/.env.example infra/.env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env: –≤–∫–ª—é—á–∏—Ç–µ MCP_AUTH_ENABLED –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ MCP_AUTH_TOKEN

# 3. –ó–∞–ø—É—Å–∫
docker-compose up -d

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞
curl -k https://localhost/health
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `https://localhost`

**üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [DEPLOYMENT.md](DEPLOYMENT.md)

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è Production

- ‚úÖ **HTTP Streamable Transport** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –≤–º–µ—Å—Ç–æ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ SSE
- ‚úÖ **Bearer Token Authentication** - –∑–∞—â–∏—Ç–∞ MCP endpoints
- ‚úÖ **HTTPS/TLS Support** - —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞
- ‚úÖ **Nginx Reverse Proxy** - rate limiting –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞
- ‚úÖ **Docker Compose** - –ø—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Frontend  ‚îÇ  Gradio Web UI (–ø–æ—Ä—Ç 7860)
‚îÇ   (Gradio)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ HTTP POST /agent/query
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Agent System   ‚îÇ  FastAPI (–ø–æ—Ä—Ç 8005)
‚îÇ  (LangGraph)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ MCP Protocol
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   MCP Server    ‚îÇ  FastMCP (–ø–æ—Ä—Ç 8004)
‚îÇ  (Data Access)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[MCP Server README](backend/mcp_server/README.md)** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ MCP —Å–µ—Ä–≤–µ—Ä—É, –¥–æ—Å—Ç—É–ø–Ω—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º –∏ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- **[Agent System README](backend/agent/README.md)** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ –ø—Ä–∏–º–µ—Ä–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Frontend

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

**–û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã (–±–µ–∑ VIN):**
- "–ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –ø—Ä–µ–≤—ã—Å–∏–º —Å—Ä–æ–∫–∏ —Ä–µ–º–æ–Ω—Ç–∞?"
- "–ö–∞–∫–∏–µ –ø—Ä–∞–≤–∞ —É –∫–ª–∏–µ–Ω—Ç–∞ –ø—Ä–∏ –≥–∞—Ä–∞–Ω—Ç–∏–∏?"
- "–ö–∞–∫–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å–ª—É–∂–±—ã?"
- "–ö–∞–∫–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º —Ä–µ–º–æ–Ω—Ç–µ?"

**–° —É–∫–∞–∑–∞–Ω–∏–µ–º VIN:**
- "–°–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å –±—ã–ª –≤ —Ä–µ–º–æ–Ω—Ç–µ?"
- "–ò—Å—Ç–æ—Ä–∏—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è"
- "–ê–Ω–∞–ª–∏–∑ —á–∞—Å—Ç–æ—Ç—ã —Ä–µ–º–æ–Ω—Ç–æ–≤ —É –¥–∏–ª–µ—Ä–∞"
- "–ü–æ–∫–∞–∂–∏ –≤—Å–µ –≥–∞—Ä–∞–Ω—Ç–∏–π–Ω—ã–µ –æ–±—Ä–∞—â–µ–Ω–∏—è"

### API Endpoint

Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç REST API –∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã:

```bash
POST http://localhost:8005/agent/query
Content-Type: application/json

{
  "query": "–í–∞—à –≤–æ–ø—Ä–æ—Å",
  "vin": "Z94C251BBLR102931",  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "context": {}
}
```

