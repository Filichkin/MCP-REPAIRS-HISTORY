# Frontend - Gradio Web Interface

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ –±–∞–∑–µ Gradio –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∞–Ω–∞–ª–∏–∑–∞ –≥–∞—Ä–∞–Ω—Ç–∏–π–Ω—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–π —á–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

## –û–ø–∏—Å–∞–Ω–∏–µ

Frontend –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–∏—Å—Ç–µ–º–æ–π –∞–Ω–∞–ª–∏–∑–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–µ–º–æ–Ω—Ç–æ–≤ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –≤ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ, —É–∫–∞–∑—ã–≤–∞—Ç—å VIN –Ω–æ–º–µ—Ä –∞–≤—Ç–æ–º–æ–±–∏–ª—è –∏ –ø–æ–ª—É—á–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç AI-–∞–≥–µ–Ω—Ç–æ–≤.

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Gradio 4.0+** - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –¥–ª—è ML/AI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- **httpx** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Agent API
- **Pydantic** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üí¨ **–ß–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ —Å AI-–∞–≥–µ–Ω—Ç–æ–º
- üîç **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ VIN** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–∫–∞–∑–∞—Ç—å VIN –∞–≤—Ç–æ–º–æ–±–∏–ª—è –ø—Ä—è–º–æ –≤ –∑–∞–ø—Ä–æ—Å–µ
- üìã **–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å –≥–æ—Ç–æ–≤—ã–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏
- üé® **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI** - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π —Ç–µ–º–æ–π
- ‚ö° **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** - –±—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ backend

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
frontend/
‚îú‚îÄ‚îÄ app.py              # –û—Å–Ω–æ–≤–Ω–æ–µ Gradio –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ config.py           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ .env)
‚îú‚îÄ‚îÄ requirements.txt    # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ run.sh             # –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞
‚îî‚îÄ‚îÄ README.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. Python 3.10+
2. –ó–∞–ø—É—â–µ–Ω–Ω—ã–π Agent System –Ω–∞ `http://localhost:8005`
3. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ (—á–µ—Ä–µ–∑ `uv sync`)

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
cd frontend
./run.sh
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫

```bash
cd frontend
source ../backend/.venv/bin/activate
python app.py
```

Frontend –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://0.0.0.0:7860`

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

–°–º. [infra/DOCKER.md](../infra/DOCKER.md) –¥–ª—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ –∑–∞–ø—É—Å–∫—É —á–µ—Ä–µ–∑ Docker Compose.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ frontend —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–µ `infra/.env`:

```bash
# API Configuration
API_BASE_URL=http://localhost:8005  # URL –∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

# UI Configuration
UI_SERVER_NAME=0.0.0.0              # –•–æ—Å—Ç –¥–ª—è Gradio —Å–µ—Ä–≤–µ—Ä–∞
UI_SERVER_PORT=7860                 # –ü–æ—Ä—Ç –¥–ª—è Gradio —Å–µ—Ä–≤–µ—Ä–∞
UI_SHARE=false                      # –í–∫–ª—é—á–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø (Gradio share)

# Chat Configuration
CHAT_TIMEOUT=120.0                  # –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å–µ–∫—É–Ω–¥—ã)
CHAT_HEIGHT=600                     # –í—ã—Å–æ—Ç–∞ —á–∞—Ç–∞ (–ø–∏–∫—Å–µ–ª–∏)
MAX_MESSAGE_LINES=5                 # –ú–∞–∫—Å–∏–º—É–º —Å—Ç—Ä–æ–∫ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è Docker

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
API_BASE_URL=http://agent:8005  # –ò–º—è —Å–µ—Ä–≤–∏—Å–∞ –∏–∑ docker-compose
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

**–û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã (–±–µ–∑ VIN):**
- "–ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –ø—Ä–µ–≤—ã—Å–∏–º —Å—Ä–æ–∫–∏ —Ä–µ–º–æ–Ω—Ç–∞?"
- "–ö–∞–∫–∏–µ –ø—Ä–∞–≤–∞ —É –∫–ª–∏–µ–Ω—Ç–∞ –ø—Ä–∏ –≥–∞—Ä–∞–Ω—Ç–∏–∏?"
- "–ö–∞–∫–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å–ª—É–∂–±—ã?"
- "–ö–∞–∫–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º —Ä–µ–º–æ–Ω—Ç–µ?"

**–° —É–∫–∞–∑–∞–Ω–∏–µ–º VIN:**
- "–°–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å —Å VIN Z94C251BBLR102931 –±—ã–ª –≤ —Ä–µ–º–æ–Ω—Ç–µ?"
- "–ò—Å—Ç–æ—Ä–∏—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è Z94C251BBLR102931"
- "–ê–Ω–∞–ª–∏–∑ —á–∞—Å—Ç–æ—Ç—ã —Ä–µ–º–æ–Ω—Ç–æ–≤ —É –¥–∏–ª–µ—Ä–∞ –¥–ª—è VIN Z94C251BBLR102931"
- "–ü–æ–∫–∞–∂–∏ –≤—Å–µ –≥–∞—Ä–∞–Ω—Ç–∏–π–Ω—ã–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –¥–ª—è Z94C251BBLR102931"

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

1. **–ü–æ–ª–µ –≤–≤–æ–¥–∞** - –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –∑–∞–ø—Ä–æ—Å
2. **–ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å"** - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ –∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ
3. **–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞** - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∏–∞–ª–æ–≥ —Å AI-–∞–≥–µ–Ω—Ç–æ–º
4. **–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤** - –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –≥–æ—Ç–æ–≤—ã–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏

## API Integration

Frontend –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å Agent System —á–µ—Ä–µ–∑ REST API:

```bash
POST http://localhost:8005/agent/query
Content-Type: application/json

{
  "query": "–í–∞—à –≤–æ–ø—Ä–æ—Å",
  "vin": "Z94C251BBLR102931",  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –≤ —Ç–µ–∫—Å—Ç–µ –∑–∞–ø—Ä–æ—Å–∞
  "context": {}
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

Frontend –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫:
- **Timeout** - –ø—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞
- **Connection Error** - –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ API
- **HTTP Errors** - –æ—à–∏–±–∫–∏ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ (4xx, 5xx)

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ `uv`:

```bash
uv sync
```

–ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:

```bash
pip install -r requirements.txt
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

- `app.py` - –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å Gradio –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
  - `query_agent()` - —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API
  - `create_interface()` - —Å–æ–∑–¥–∞–Ω–∏–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
  - `respond()` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

- `config.py` - –º–æ–¥—É–ª—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  - `FrontendConfig` - –∫–ª–∞—Å—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –Ω–∞ –±–∞–∑–µ Pydantic
  - –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ `infra/.env`

### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

#### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–º—ã

–í `app.py` –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–µ–º—É Gradio:

```python
theme = gr.themes.Soft(
    primary_hue='purple',      # –û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç
    secondary_hue='blue',      # –í—Ç–æ—Ä–∏—á–Ω—ã–π —Ü–≤–µ—Ç
    neutral_hue='slate',       # –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π —Ü–≤–µ—Ç
    font=['Arial', 'sans-serif']
)
```

#### –ò–∑–º–µ–Ω–µ–Ω–∏–µ CSS

–î–æ–±–∞–≤—å—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–π CSS –≤ `custom_css`:

```python
custom_css = '''
    .custom-class {
        /* –≤–∞—à–∏ —Å—Ç–∏–ª–∏ */
    }
'''
```

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ —É–¥–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ API

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Agent System –∑–∞–ø—É—â–µ–Ω –Ω–∞ `http://localhost:8005`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `API_BASE_URL` –≤ `infra/.env`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs agent`

### –ü—Ä–æ–±–ª–µ–º–∞: Timeout –æ—à–∏–±–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–≤–µ–ª–∏—á—å—Ç–µ `CHAT_TIMEOUT` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å Agent System
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ MCP Server –¥–æ—Å—Ç—É–ø–µ–Ω

### –ü—Ä–æ–±–ª–µ–º–∞: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 7860 —Å–≤–æ–±–æ–¥–µ–Ω
2. –ò–∑–º–µ–Ω–∏—Ç–µ `UI_SERVER_PORT` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## Production Deployment

–î–ª—è production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker Compose (—Å–º. [infra/DOCKER.md](../infra/DOCKER.md))
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx reverse proxy
3. –í–∫–ª—é—á–∏—Ç–µ HTTPS/TLS
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[Agent System README](../backend/agent/README.md)** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ
- **[MCP Server README](../backend/mcp_server/README.md)** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ MCP —Å–µ—Ä–≤–µ—Ä—É
- **[Docker & Deployment Guide](../infra/DOCKER.md)** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

